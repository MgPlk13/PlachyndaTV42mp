<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∞—Ç–∞–∫</title>

    <style>
        :root {
            --primary: #2d89ef;
            --primary-dark: #1c5fb8;
            --danger: #e74c3c;
            --danger-dark: #c0392b;
            --bg: #f4f6f9;
            --text: #333;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --radius: 10px;
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: "Segoe UI", Arial, sans-serif;
            background: var(--bg);
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 900px;
            background: #ffffff;
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2 {
            font-size: 22px;
            margin-top: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        p {
            font-size: 16px;
            margin-top: 10px;
        }

        table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
            font-size: 15px;
        }

        th,
        td {
            padding: 10px 12px;
            border: 1px solid #cccccc;
            text-align: left;
        }

        th {
            background-color: #f0f0f0;
        }

        ul {
            margin-top: 15px;
            padding-left: 20px;
            list-style-type: disc;
        }

        code {
            display: block;
            margin-top: 5px;
            padding: 6px;
            background: #eeeeee;
            border-radius: 4px;
            font-size: 14px;
            white-space: pre-wrap;
        }

        .actions {
            display: flex;
            gap: 10px;
            margin: 15px 0 20px;
        }

        .btn {
            display: inline-block;
            padding: 10px 15px;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 500;
            color: #ffffff;
            transition: background 0.2s ease-in-out;
        }

        .btn-download {
            background: var(--primary);
        }

        .btn-download:hover {
            background: var(--primary-dark);
        }

        .btn-clear {
            background: var(--danger);
        }

        .btn-clear:hover {
            background: var(--danger-dark);
        }

        .back-link {
            display: inline-block;
            margin-top: 30px;
            font-weight: 500;
            color: var(--primary);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
<div class="container">
    <h1> –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –∞—Ç–∞–∫</h1>

    <div class="actions">
        <a href="/logs/download" class="btn btn-download">
            –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ CSV
        </a>

        {% if session.role == 'admin' %}
        <a href="/logs/clear" class="btn btn-clear">
            üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥–∏
        </a>
        {% endif %}
    </div>

    <p>
        <strong>AI-–∞—Ç–∞–∫ –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ:</strong> {{ ai_today }}
    </p>

    <h2> –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–æ –≥–æ–¥–∏–Ω–∞—Ö</h2>

    <table>
        <thead>
        <tr>
            <th>–ì–æ–¥–∏–Ω–∞</th>
            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∞—Ç–∞–∫</th>
        </tr>
        </thead>
        <tbody>
        {% for hour, count in hourly_data %}
        <tr>
            <td>{{ hour }}</td>
            <td>{{ count }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>

    <h2>üî• –¢–æ–ø-5 –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –∞—Ç–∞–∫</h2>

    <ul>
        {% for attack in top_queries %}
        <li>
            <strong>{{ attack.timestamp }}</strong> |
            <strong>{{ attack.reason }}</strong> |
            Score: {{ attack.score or "-" }}
            <code>{{ attack.query }}</code>
        </li>
        {% else %}
        <li>–ù–µ–º–∞—î –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏—Ö –∞—Ç–∞–∫.</li>
        {% endfor %}
    </ul>

    <a href="/" class="back-link">‚Üê –ù–∞–∑–∞–¥</a>
</div>
</body>
</html>
